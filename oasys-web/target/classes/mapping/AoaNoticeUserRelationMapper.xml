<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.oasys.web.model.dao.notice.AoaNoticeUserRelationMapper">
  <resultMap id="BaseResultMap" type="cn.oasys.web.model.pojo.notice.AoaNoticeUserRelation">
    <id column="relatin_id" jdbcType="BIGINT" property="relatinId" />
    <result column="is_read" jdbcType="INTEGER" property="isRead" />
    <result column="relatin_notice_id" jdbcType="BIGINT" property="relatinNoticeId" />
    <result column="relatin_user_id" jdbcType="BIGINT" property="relatinUserId" />

    <collection property="aoaNoticeLists" ofType="cn.oasys.web.model.pojo.notice.AoaNoticeList">
      <id column="notice_id" property="noticeId" />
      <result column="content" property="content" />
      <result column="is_top" property="isTop" />
      <result column="modify_time" property="modifyTime" />
      <result column="notice_time" property="noticeTime" />
      <result column="status_id" property="statusId" />
      <result column="title" property="title" />
      <result column="type_id" property="typeId" />
      <result column="url" property="url" />
      <result column="user_id" property="userId" />
    </collection>

  </resultMap>
  <sql id="Example_Where_Clause">
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause">
    <where>
      <foreach collection="example.oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    r.relatin_id, r.is_read, r.relatin_notice_id, r.relatin_user_id,
    n.notice_id, n.content, n.is_top, n.modify_time, n.notice_time, n.status_id, n.title, n.type_id,
    n.url, n.user_id
  </sql>
  <select id="findByReadAndUserId" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List"/>
    from aoa_notice_user_relation r
    left join aoa_notice_list n
    on r.relatin_notice_id=n.notice_id
     where r.is_read=#{read} and r.relatin_user_id=#{id}
  </select>
</mapper>